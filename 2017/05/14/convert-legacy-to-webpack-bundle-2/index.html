<!DOCTYPE html><html><head><meta charset="utf-8"><title>운영되던 서비스, ES5 에서 ES6 으로 옮긴 이야기 2 (feat Webpack) | NonBlock</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="개고생과 노가다, 그리고 고독"><meta property="og:type" content="article"><meta property="og:title" content="운영되던 서비스, ES5 에서 ES6 으로 옮긴 이야기 2 (feat Webpack)"><meta property="og:url" content="https://blog.javarouka.me/2017/05/14/convert-legacy-to-webpack-bundle-2/index.html"><meta property="og:site_name" content="NonBlock"><meta property="og:description" content="개고생과 노가다, 그리고 고독"><meta property="og:locale" content="ko_KR"><meta property="og:image" content="https://blog.javarouka.me/asset/E.N.D.jpg"><meta property="article:published_time" content="2017-05-14T14:30:17.000Z"><meta property="article:modified_time" content="2020-09-22T04:18:02.869Z"><meta property="article:author" content="JavaRouka"><meta property="article:tag" content="javascript"><meta property="article:tag" content="Handlebars"><meta property="article:tag" content="webpack"><meta property="article:tag" content="개고생"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://blog.javarouka.me/asset/E.N.D.jpg"><link rel="apple-touch-icon" sizes="57x57" href="/fav/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/fav/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/fav/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/fav/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/fav/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/fav/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/fav/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/fav/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/fav/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/fav/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/fav/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/fav/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/fav/favicon-16x16.png"><link rel="manifest" href="/fav/manifest.json"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/fav/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><meta name="keywords" content="javascript,Handlebars,webpack,개고생"><link href="https://fonts.googleapis.com/css?family=Lato:400,400i,700" rel="stylesheet"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-85661914-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-85661914-1")</script><link rel="stylesheet" href="/icomoon/style.css"><link rel="stylesheet" href="/style.css"><script type="text/javascript">var __sauron=__sauron||[];__sauron.push(["pageview"]),function(){var e="https://analy1.sauroneyes.com/";__sauron.push(["setTrackerUrl",e+"analytics/"]);var a=document,r=a.createElement("script"),s=a.getElementsByTagName("script")[0];r.type="text/javascript",r.async=!0,r.defer=!0,r.src=e+"js/sauron.js",s.parentNode.insertBefore(r,s)}()</script><meta name="generator" content="Hexo 5.2.0"><link rel="stylesheet" href="/css/prism.css" type="text/css"><link rel="alternate" href="/atom.xml" title="NonBlock" type="application/atom+xml">
</head><body><div class="site-wrapper"><div id="loading-bar-wrapper"><div id="loading-bar"></div></div><script>document.getElementById("loading-bar").style.width="20%"</script><header id="header" class="site-header clearfix"><a class="logo square clearfix" href="/"><span class="b">N </span><span class="b">o </span><span class="b">n </span><span class="w">B </span><span class="b">l </span><span class="w">o </span><span class="b">c </span><span class="b">k </span></a><a class="me square site-nav-switch clearfix"><span class="b"><span class="icon icon-menu"></span></span></a></header><aside class="category-wrapper"><div class="site-category"><a class="nav flex-column-link" href="/categories/effective-java/">Effective Java</a><a class="nav flex-column-link" href="/categories/review/">Review</a><a class="nav flex-column-link" href="/categories/tech/">Tech</a><a class="nav flex-column-link" href="/categories/tech/translate/">Translate</a><a class="nav flex-column-link" href="/categories/book/">book</a><a class="nav flex-column-link" href="/categories/java/">java</a><a class="nav flex-column-link" href="/categories/java/kotlin/">kotlin</a><a class="nav flex-column-link" href="/categories/javascript/">javascript</a><a class="nav flex-column-link" href="/categories/javascript/react/">react</a><a class="nav flex-column-link" href="/categories/javascript/react/redux-saga/">redux-saga</a><a class="nav flex-column-link" href="/categories/kotlin/">kotlin</a><a class="nav flex-column-link" href="/categories/kotlin/tech/">tech</a><a class="nav flex-column-link" href="/categories/kotlin/tech/translate/">translate</a></div><div class="search"><form name="searchform" id="searchform" class="u-search-form"><input type="text" id="searchinput" class="u-search-input st-default-search-input" data-list-highlight="true" data-list-value-completion="true" placeholder="Looking for something in this blog?"> <button type="submit" id="u-search-btn-submit" class="u-search-btn-submit"><span class="icon icon-search"></span></button></form></div><script>document.getElementById("loading-bar").style.width="40%"</script><main id="main" class="clearfix"><article id="post-convert-legacy-to-webpack-bundle-2" class="article white-box article-type-post" itemscope itemprop="blogPost"><header class="article-header"><h1 class="article-title" itemprop="name">운영되던 서비스, ES5 에서 ES6 으로 옮긴 이야기 2 (feat Webpack)</h1><h2 class="article-sub-title">개고생과 노가다, 그리고 고독</h2><div class="article-meta">Posted on <time class="article-time" datetime="2017-05-14T14:30:17.000Z" itemprop="datePublished">2017-05-14</time></div></header><div class="article-entry" itemprop="articleBody"><blockquote><p>2016년 5월부터 2016년 6월까지 진행된 나의 to ES6 삽질을 기록해본다. 100% Real 은 아니고… 95% 정도?</p></blockquote><p><a href="/2017/05/03/convert-legacy-to-webpack-bundle-1/">전 글</a></p><h2 id="버틸수가-없다"><a href="#버틸수가-없다" class="headerlink" title="버틸수가 없다"></a>버틸수가 없다</h2><p>전 포스트의 막바지에 썼듯이 실무는 실전이었다.</p><p>다음과 같은 문제를 부딪히며 하나하나 해결해 나갈 수 밖에 없었다.</p><h3 id="컨트롤러-매핑-문제"><a href="#컨트롤러-매핑-문제" class="headerlink" title="컨트롤러 매핑 문제"></a>컨트롤러 매핑 문제</h3><p>requirejs 를 쓰면서 AMD 식으로 필요할 때 스크립트를 로딩했는데, 이 부분부터 고쳐야 했다</p><p>Controller 의 이름이 만일 <code>order/MemberController</code> 라면 다음과 같은 방법으로 컨트롤러를 로딩한다.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// const controllerPath = &#x27;order/MemberController&#x27;;</span></span><br><span class="line"><span class="built_in">require</span>([<span class="string">`controller/<span class="subst">$&#123;controllerPath&#125;</span>`</span>], <span class="function"><span class="params">ControllerClass</span> =&gt;</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> controlelr = <span class="keyword">new</span> ControllerClass(contentElement, controllerPath)</span><br><span class="line">    controlelr.execute();</span><br><span class="line">    </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>이 방법은 필요할 때 비동기로 네트워크 상에서 스크립트를 로딩하고, 완료 시 콜백 함수의 인자를 통해 모듈을 사용한다</p><p>일단은 기본적으로 모든 모듈이 바로 접근 가능해야 하는 ES6의 모듈은 이런것을 허용하지 않았다.</p><p>결국 아래와 같은 controllerMap 을 만들었다</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @file controllerFactory.js</span></span><br><span class="line"><span class="keyword">import</span> EmptyController <span class="keyword">from</span> <span class="string">&#x27;./EmptyController&#x27;</span></span><br><span class="line"><span class="keyword">import</span> MainController <span class="keyword">from</span> <span class="string">&#x27;./OrderController&#x27;</span></span><br><span class="line"><span class="keyword">import</span> OrderController <span class="keyword">from</span> <span class="string">&#x27;./order/OrderController&#x27;</span></span><br><span class="line"><span class="keyword">import</span> MemberController <span class="keyword">from</span> <span class="string">&#x27;./member/MemberController&#x27;</span></span><br><span class="line"><span class="keyword">import</span> MemberBlockController <span class="keyword">from</span> <span class="string">&#x27;./member/MemberBlockController&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ... Controller import Statement 다수</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> controllerMap = &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="string">&#x27;MainController&#x27;</span>: MainController,</span><br><span class="line">    <span class="string">&#x27;order/OrderController&#x27;</span>: OrderController,</span><br><span class="line">    <span class="string">&#x27;member/MemberController&#x27;</span>: MemberController,</span><br><span class="line">    <span class="string">&#x27;member/MemberBlockController&#x27;</span>: MemberBlockController,</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 이름으로 매핑해둔 컨트롤러를 반환한다.</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params">conrollerPath</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> controllerMap[conrollerPath] || <span class="keyword">new</span> EmptyController();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>이런식으로 미리 Controller 모듈을 로딩해두고 맵으로 관리되게 한 다음, 반환하는 Factory 모듈을 만들어서 처리했다.</p><p>동적 로딩을 완전히 포기하고 초기에 모든 스크립트를 로딩하게 한 선택이다.</p><p>물론 초기 스크립트 로딩 용량이 굉장히 커지고 컨텐트와 컨트롤러가 추가될수록 증가하지만, 별 방법이 없다고 생각했다.</p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://webpack.github.io/docs/code-splitting.html">require.ensure</a> 를 사용하여 동적 로딩을 선택할 수도 있었지만 동적 로딩도 동적 문자열로 모듈을 로딩하는건 불가능하기에, 각 컨트롤러의 매핑마다 동적 로딩 코드를 적어주어야 했다.</p><p>다음과 같이 말이다. 별로 마음에 들지 않았다.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @file asyncControllerFactory.js</span></span><br><span class="line"><span class="keyword">import</span> EmptyController <span class="keyword">from</span> <span class="string">&#x27;./EmptyController&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> controllerMap = &#123;</span><br><span class="line">    </span><br><span class="line">    [<span class="string">&#x27;MainController&#x27;</span>]() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">require</span>.ensure([], <span class="function">() =&gt;</span> resolve(<span class="built_in">require</span>(<span class="string">&#x27;./MainController&#x27;</span>)))</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    [<span class="string">&#x27;order/OrderController&#x27;</span>]() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">require</span>.ensure([], <span class="function">() =&gt;</span> resolve(<span class="built_in">require</span>(<span class="string">&#x27;./order/OrderController&#x27;</span>)))</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params">conrollerPath</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> factory = controllerMap[conrollerPath];</span><br><span class="line">    <span class="keyword">return</span> factory ? </span><br><span class="line">        factory().then(<span class="function"><span class="params">Controller</span> =&gt;</span> <span class="keyword">new</span> Controller().execute())</span><br><span class="line">        :</span><br><span class="line">        <span class="built_in">Promise</span>.resolve(<span class="keyword">new</span> EmptyController().execute());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>저 <code>ensure</code> 구문은 반드시 저렇게 패스와 같이 적어줘야지 별도로 분리하게 되면 webpack 번들링 후 실제 로딩이 잘 동작하지 않았다.</p><p>컨트롤러 수가 작업 당시에는 그렇게 많지 않았고 동적 로딩 시 종종 Timeout 등의 네트워크 오류도 났기에 그냥 전체를 한번에 번들링해버리는 선택을 했다.<br>(그리고 나중에 엄청 후회했다…)</p><h4 id="Webpack2-에서의-Async-Module-Loading"><a href="#Webpack2-에서의-Async-Module-Loading" class="headerlink" title="Webpack2 에서의 Async Module Loading"></a>Webpack2 에서의 Async Module Loading</h4><p>Webpack 2 에서는 <code>import</code> 와 <code>async/await</code> 를 사용해서 동적 로딩을 할 수 있다.<br>이런식의 코딩이 가능. 표준을 준수한다는 것 외엔 특별한 외형 차이는 없다.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES7 의 async 와 await 를 사용한다</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">loadOrderCancelController</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> Controller = <span class="keyword">await</span> <span class="keyword">import</span>(<span class="string">&#x27;./OrderCancelController&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> Controller;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">loadOrderCancelController()</span><br><span class="line">    .then(<span class="function"><span class="params">Controller</span> =&gt;</span> <span class="keyword">new</span> Controller().execute());</span><br></pre></td></tr></table></figure></div><p>이제 각 컨트롤러를 매핑해주고 컨텐츠 로더가 그것을 잘 사용할 수 있게 수정하는 노가다만 남은듯 했다.</p><p>하지만 현실은 …</p><h3 id="ES6-모듈과-commonjs-amd-모듈은-달랐다"><a href="#ES6-모듈과-commonjs-amd-모듈은-달랐다" class="headerlink" title="ES6 모듈과 commonjs, amd 모듈은 달랐다."></a>ES6 모듈과 commonjs, amd 모듈은 달랐다.</h3><p>Webpack 은 분명 AMD 와 commonjs 모듈도 사용할 수 있다. 실제로도 그렇다.<br>하지만, 이 두 스펙의 모듈 정의를 ES6 모듈과 함께 사용할때는 큰 문제가 발생했다.</p><p>ES6 모듈 정의에는 <code>default export, named export</code> 라는 AMD, commonjs 에 없는 개념이 있었기 때문이다.</p><p><img src="/asset/howthefuck.jpg" alt="뭐냐..."></p><p>다음에 세가지 스타일로 모듈을 정의해보았다.<br>이 모듈의 이름은 <code>rouka/blog/module</code> 이라고 해보자</p><p>먼저, AMD 모듈은 다음과 같은 형식이다.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">define([ <span class="string">&#x27;jquery&#x27;</span>, <span class="string">&#x27;moment&#x27;</span> ], <span class="function"><span class="keyword">function</span> <span class="title">factory</span>(<span class="params">$, moment</span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> YMD_FORMAT_STR = <span class="string">&#x27;YYYYMMDD&#x27;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        getEl(selector, context) &#123;</span><br><span class="line">            <span class="keyword">return</span> $(selector, context || <span class="built_in">document</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        </span><br><span class="line">        todayString() &#123;</span><br><span class="line">           <span class="keyword">return</span> moment().format(YMD_FORMAT_STR);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>commonjs 의 모듈은 다음과 같은 형식이다</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> $ = <span class="built_in">require</span>(<span class="string">&#x27;jquery&#x27;</span>); </span><br><span class="line"><span class="keyword">const</span> moment = <span class="built_in">require</span>(<span class="string">&#x27;moment&#x27;</span>); </span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> YMD_FORMAT_STR = <span class="string">&#x27;YYYYMMDD&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.getEl = <span class="function"><span class="keyword">function</span>(<span class="params">selector, context</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $(selector, context || <span class="built_in">document</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.todayString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> moment().format(YMD_FORMAT_STR);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ES6 모듈은 다음과 같은 형식이다.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> $ <span class="keyword">from</span> <span class="string">&#x27;jquery&#x27;</span>; </span><br><span class="line"><span class="keyword">import</span> moment <span class="keyword">from</span> <span class="string">&#x27;moment&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> YMD_FORMAT_STR = <span class="string">&#x27;YYYYMMDD&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getEl</span>(<span class="params">selector, context</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $(selector, context || <span class="built_in">document</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">todayString</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> moment().format(YMD_FORMAT_STR);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>여기까지는 세개 다 비슷해 보인다. 모듈을 로딩할때 쓰는 statement 나 문법만 다른 정도.<br>하지만 위의 정의 모듈을 사용할때 달라진다.</p><p>먼저 AMD 와 commonjs 는 기본적으로 형태만 다를 뿐 기본적인 사용은 같다.</p><p>모듈을 로딩하고, 해당 모듈을 객체를 얻으면 그 모듈을 사용할 수 있다</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AMD</span></span><br><span class="line"><span class="built_in">require</span>([<span class="string">&#x27;rouka/blog/module&#x27;</span>], <span class="function"><span class="keyword">function</span>(<span class="params">blogModule</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(blogModule.todayString()); <span class="comment">// 오늘 날자...</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// commonjs</span></span><br><span class="line"><span class="keyword">const</span> blogModule = <span class="built_in">require</span>(<span class="string">&#x27;rouka/blog/module&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(blogModule.todayString()); <span class="comment">// 오늘 날자...</span></span><br></pre></td></tr></table></figure><p>하지만 이 모듈을 ES6 에서 사용하려면 좀 다르다.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES6</span></span><br><span class="line"><span class="comment">// 이 부분이 다르다!</span></span><br><span class="line"><span class="keyword">import</span> &#123; todayString &#125; <span class="keyword">from</span> <span class="string">&#x27;rouka/blog/module&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(todayString()); <span class="comment">// 오늘 날자...</span></span><br></pre></td></tr></table></figure><p>import 시에 실제 사용할 기능 프로퍼티 이름을 적어주고 있다.<br>만일 그냥</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES6</span></span><br><span class="line"><span class="keyword">import</span> blogModule <span class="keyword">from</span> <span class="string">&#x27;rouka/blog/module&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(blogModule.todayString()); <span class="comment">// throw TypeError</span></span><br></pre></td></tr></table></figure><p>이런식으로 사용할 경우 오류를 낸다.</p><p>위의 문법은 <code>rouka/blog/module</code> 에서 default 모듈을 사용하겠다는 뜻이다.<br>ES6 모듈에는 <code>default export</code> 라는게 있다.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> $ <span class="keyword">from</span> <span class="string">&#x27;jquery&#x27;</span>; </span><br><span class="line"><span class="keyword">import</span> moment <span class="keyword">from</span> <span class="string">&#x27;moment&#x27;</span>;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getEl</span>(<span class="params">selector, context</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $(selector, context || <span class="built_in">document</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">todayString</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> moment().format(YMD_FORMAT_STR);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// default export</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">setTodayOnEl</span>(<span class="params">selector, context</span>) </span>&#123;</span><br><span class="line">    getEl(selector, context).html(todayString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>default export 로 해당 엘리먼트에 오늘 날자를 HTML 로 넣어주는 함수를 정의했다.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// default 모듈 사용</span></span><br><span class="line"><span class="keyword">import</span> setTodayOnEl <span class="keyword">from</span> <span class="string">&#x27;rouka/blog/module&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(setTodayOnEl(<span class="string">&#x27;body&#x27;</span>)); <span class="comment">// 오늘 날자...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ........................</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 명시적으로 사용</span></span><br><span class="line"><span class="keyword">import</span> &#123; setTodayOnEl &#125; <span class="keyword">from</span> <span class="string">&#x27;rouka/blog/module&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(setTodayOnEl(<span class="string">&#x27;body&#x27;</span>)); <span class="comment">// 오늘 날자...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ........................</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 혼용해서 사용. 앞이 default</span></span><br><span class="line"><span class="keyword">import</span> setTodayOnEl, &#123; todayString &#125; <span class="keyword">from</span> <span class="string">&#x27;rouka/blog/module&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(setTodayOnEl(<span class="string">&#x27;body&#x27;</span>)); <span class="comment">// 오늘 날자...</span></span><br></pre></td></tr></table></figure><p>실제 Babel 은 ES6 모듈과 이외 모듈을 다른 방식으로 컴파일하는데, ES6 의 모듈일 경우에는 <code>__esModule</code> 이라는 마크를 해 두고 import 구문을 만날 경우 다른 방식으로 import 를 수행한다.</p><p>Controller 모듈을 기본적으로 ES6 으로 변경하고 있었는데 이 경우 Controller 를 commonjs 나 amd 모듈이 import 할 경우</p><p>추가적으로 default 프로퍼티로 접근해야 했다.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./es6.style.module&#x27; 모듈은</span></span><br><span class="line"><span class="comment">// named export 와 default export 가 섞여있다.</span></span><br><span class="line"><span class="keyword">var</span> es6Module = <span class="built_in">require</span>(<span class="string">&#x27;./es6.style.module&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 이 반환된 모듈 안은</span></span><br><span class="line"><span class="comment">// &#123; default: doSome, otherSome &#125; 같은 형식이다.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 물론 doSome 사용에는 default 프로퍼티가 필요하다.</span></span><br><span class="line">es6Module.default.doSome();</span><br><span class="line"></span><br><span class="line"><span class="comment">// named export 모듈은 그냥 사용한다</span></span><br><span class="line">es6Module.otherSome();</span><br></pre></td></tr></table></figure><p>실제 프로젝트에 적용 시 세가지 스타일의 모듈 정의가 뒤섞여 작업되고 있었고,</p><p>각 모듈마다 모듈 사용에 있어 각기 다른 방법으로 사용해야 하는 지경에 이르르니, 거의 수라계에 온 듯한 느낌을 받게 했다.</p><p>webpack 에서 뱉어내는 빨간색 천지의 오류 메시지와 함께 내 마음도 붉게 물들기 시작했다</p><p><img src="/asset/doc-heatal.jpg" alt="아...그냥 그만두고 여길 나갈까"></p><div style="padding:0 5px;background-color:#ececec;border-top:solid 1px #333;font-size:80%">위의 ES6 및 commonjs 모듈의 다른 점을 알고 싶다면 엑셀박사님의 블로그를 한번 읽어보자.<br><a href="http://2ality.com/2015/12/babel-commonjs.html" target="_blank" rel="external nofollow noopener noreferrer">[Babel and CommonJS modules]</a></div><h3 id="결국-개발된-모든-파일을-ES6-으로-변환"><a href="#결국-개발된-모든-파일을-ES6-으로-변환" class="headerlink" title="결국, 개발된 모든 파일을 ES6 으로 변환~!"></a>결국, 개발된 모든 파일을 ES6 으로 변환~!</h3><p>여러 꼼수를 써보다가, 결국 선택한건 모든 파일에 대해 ES6 스타일로 코드를 변환하는 것으로 선택했다.</p><p>프로젝트 내에서 한가지 스타일로 코딩이 되어 있어야 하는건 당연한 것이고, 기왕이면 표준 스펙으로 선택하는 것이 유리했으며,</p><p>ES6 모듈을 적용하면 Dead Code Elimination(Tree Shaking) 이라는 최적화 전략까지 쓸 수 있기 때문이었다.</p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/rollup/rollup#tree-shaking">Tree Shaking</a></p><p>Tree Shaking 은 요약하면 모듈 import 최적화로 실제 컴파일 시 모듈 import 에서 사용하는 코드만 컴파일 결과에 포함시키는 것이다.</p><p>당연히 용량이 작아지고 연산이 줄어든다.</p><p>암튼 나는 당시 900 개가 넘는(…) js 코드들을 하나하나 열어서 ES6 스타일의 모듈 코드로 변환하기 시작했다.</p><p>정말 즐거운 일이었다.</p><h2 id="개발서버와-번들서버"><a href="#개발서버와-번들서버" class="headerlink" title="개발서버와 번들서버"></a>개발서버와 번들서버</h2><p>스크립트를 동적으로 컴파일한다는건 파일이 작을땐 별 문제가 되지 않는다.</p><p>하지만 프로젝트의 규모가 나름 컸으므로 생성된 파일은 상당히 많았고, 이 파일을 실제 컴파일하여 실제 파일을 만들어내는 데에는 2~3 분의 시간이 걸렸다.</p><p>뭐 배포 전 한번이라면 괜찮다.</p><p>하지만 이 것이 watch 등으로 코드 수정시마다 일어난다고 할 경우에는 문제가 심각해진다.</p><p>webapack 은 <code>webpack dev server</code> 를 제공했고, 이것을 사용할 경우 파일을 실제 Disk 에 생성하는게 아닌 메모리에 생성하고 그것만을 갱신하기에 속도가 상당히 빠르다.</p><p>설정은 예제 사이트들이 아주 잘 되어있어서 그것을 가져다가 쓰면 되었다.</p><p>여기에 express 를 사용해서 Data Server 를 Proxy 로 감싸서 쓰게 되면 로컬에 별도의 java 를 구동하지 않고도 사용할 수 있어서 클라이언트 개발에는 순수하게 webpack-dev-server 만으로도 충분하도록 설정했다.<br>(뭐 결국 서버까지 손대는 일이 부지기수지만…갑작스러운 오류 등으로 클라이언트에 대해 디버깅하기에는 엄청나게 유용했다.)</p><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.npmjs.com/package/express-http-proxy">express-http-proxy</a> 를 사용해서 정적 리소스 외에는 프록시로 이미 구동중인 서버로 요청을 하게 했다.</p><p>프록시-번들서버 코드는 매우 간단하다.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> proxy <span class="keyword">from</span> <span class="string">&#x27;express-http-proxy&#x27;</span> <span class="comment">// 이놈이 효자</span></span><br><span class="line"><span class="keyword">import</span> Express <span class="keyword">from</span> <span class="string">&#x27;express&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">startProxyServer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> delegateServer = <span class="keyword">new</span> Express();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 프록시 서버 정보</span></span><br><span class="line">    <span class="keyword">const</span> proxyServer = <span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> proxyPort = <span class="number">11980</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 번들서버 정보</span></span><br><span class="line">    <span class="keyword">const</span> bundleServerHost = <span class="string">&#x27;localhost:11980&#x27;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// API 서버 정보</span></span><br><span class="line">    <span class="keyword">const</span> targetServer = <span class="string">&#x27;myproject.companydev.com&#x27;</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 번들서버 요청</span></span><br><span class="line">    delegateServer.use(<span class="string">&#x27;/resources/*/bundles/:name&#x27;</span>, proxy(bundleServerHost, &#123;</span><br><span class="line">        forwardPath(req) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="string">&#x27;/bundles/&#x27;</span> + req.params.name;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;));</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 이 외의 요청은 Proxy 를 통해 설정된 서버로.</span></span><br><span class="line">    delegateServer.use(<span class="string">&#x27;/&#x27;</span>, proxy(targetServer));</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 시작~</span></span><br><span class="line">    delegateServer.listen(proxyPort, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="built_in">console</span>.error(err);</span><br><span class="line">            reject(err);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.info(<span class="string">&#x27;Webpack development proxy server progress... %s&#x27;</span>, <span class="string">`http://<span class="subst">$&#123;proxyServer&#125;</span>:<span class="subst">$&#123;proxyPort&#125;</span> to <span class="subst">$&#123;targetServer&#125;</span>`</span>);</span><br><span class="line">            resolve();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>webpack-dev-server</code> 를 구동할때 프록시 개발서버까지 같이 돌려주면 완벽.</p><p>이제 남은건 실제 배포 환경이었다.</p><h2 id="실제-배포환경"><a href="#실제-배포환경" class="headerlink" title="실제 배포환경"></a>실제 배포환경</h2><p>실제 운영 환경에서는 번들서버같은걸 띄울수도 없고 띄워서도 안된다.</p><p>운영시에는 메모리에 존재하는 스크립트가 아니라 실제 파일을 만들어야 해서 별도로 webpack 설정을 production 용으로 하나 만들고 이 설정에서는 별다른 번들서버나 프록시, 기타 개발 서포트 플러그인을 제외하고 구성했다.</p><p>개발에는 없던 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://webpack.github.io/docs/list-of-plugins.html#uglifyjsplugin">UglifyPlugin</a> 옵션을 추가해서 소스를 압축했다.</p><p>사내에서는 빌드에 <code>gradle</code> 을 사용하고 있었기에 다음과 같은 구문을 넣어서 <code>gradle</code> 의 <code>war task</code> 수행 전 <code>npm</code> 을 사용해서 소스를 컴파일하고 파일을 지정된 위치에 생성되게 했다.</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">apply <span class="string">&#x27;war&#x27;</span></span><br><span class="line"></span><br><span class="line">task packageClient (<span class="attr">type :</span> Exec) &#123;</span><br><span class="line">	executable <span class="string">&quot;$&#123;project.projectDir&#125;/packageClient.sh&quot;</span> <span class="comment">// npm 빌드 스크립트</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 여기~</span></span><br><span class="line">war.dependsOn packageClient</span><br></pre></td></tr></table></figure><h2 id="끝났나"><a href="#끝났나" class="headerlink" title="끝났나"></a>끝났나</h2><p>검색 - 삽질 - 노가다 - 삽질 - 검색의 무한루프를 돌며 변환이 끝났다.</p><p>이 작업은 기존의 잘 돌아가던 시스템을 다시 엎은거라서, 잘 되어야 본전인 일이라 사실 티는 그다지 나지 않았다.<br>중간에 몇가지의 문제로 압박받은것만 많았고…</p><p>게다가 모든 코드를 한번에 로딩하는 방법을 선택해서, 스크립트 용량이 상당히 거대해져버린 문제는 과제로 남았다.</p><p>최근 webpack 2가 나오면서 webpack 1 이 deprecated 되었다. 다시 설정을 만질 때가 온 듯 하니 같이 작업하면 될 듯 하다.</p></article></main></aside></div><div class="article-tags"><a class="tag-none-link" href="/tags/handlebars/" rel="tag">Handlebars</a><a class="tag-none-link" href="/tags/javascript/" rel="tag">javascript</a><a class="tag-none-link" href="/tags/webpack/" rel="tag">webpack</a><a class="tag-none-link" href="/tags/%EA%B0%9C%EA%B3%A0%EC%83%9D/" rel="tag">개고생</a></div><section id="comments" class="white-box"><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></section><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5bf3f68d0a53e4d6"></script><script>document.getElementById("loading-bar").style.width="60%"</script><footer id="footer" class="clearfix"><div>&copy; <a href="https://blog.javarouka.me">NonBlock</a> Theme by <a href="http://artifact.me/" target="_blank" rel="external nofollow noopener noreferrer">Art Chen</a>.</div><div>Powered by <a target="_blank" href="https://hexo.io/" rel="external nofollow noopener noreferrer">Hexo</a>.</div></footer><script>document.getElementById("loading-bar").style.width="80%"</script><div class="overlay"></div><div class="site-sidebar"><div class="sidebar-switch clearfix show" style="display:block"><a class="dark-btn active" data-toggle="toc"><span class="icon icon-list"></span> <span class="text">Index</span> </a><a class="dark-btn" data-toggle="bio"><span class="icon icon-person"></span> <span class="text">Bio</span></a></div><div class="site-bio" style="display:none"><div class="about-me clearfix"><div class="avatar"><img src="https://avatars2.githubusercontent.com/u/1438503?v=4&s=250"></div><div class="info"><a class="name dark-btn" href="/about">JavaRouka</a></div><div class="info"><span class="item desc">javarouka 의 기술블로그</span></div></div><div class="social clearfix"><a href="/atom.xml" class="feed" target="_blank" rel="external"><span class="icon icon-feed"></span> </a><a href="mailto:javarouka@gmail.com" class="mail" target="_blank" rel="external nofollow noopener noreferrer"><span class="icon icon-mail"></span> </a><a href="https://github.com/javarouka" class="github" target="_blank" rel="external nofollow noopener noreferrer"><span class="icon icon-github"></span> </a><a href="https://www.facebook.com/hanghui.i" class="facebook" target="_blank" rel="external nofollow noopener noreferrer"><span class="icon icon-facebook"></span></a></div><div class="shortcuts clearfix"><div class="bk"><a href="#header" class="dark-btn window-nav"><span class="icon icon-chevron-thin-up"></span> <span class="text">Back to Top</span></a></div><div class="bk"><a href="#footer" class="dark-btn window-nav"><span class="icon icon-chevron-thin-down"></span> <span class="text">Go to Bottom</span></a></div></div></div><div class="site-post-nav show" style="display:block"><div class="site-post-nav-box"><a href="/2018/01/01/lerna/" class="icon icon-chevron-thin-left"><a href="/2018/01/01/lerna/" class="site-post-nav-text">Lerna</a></a></div><div class="site-post-nav-box"><a href="/2017/05/03/convert-legacy-to-webpack-bundle-1/" class="site-post-nav-text">운영되던 서비스, ES5 에서 ES6 으로 옮긴 이야기 1</a> <a href="/2017/05/03/convert-legacy-to-webpack-bundle-1/" class="icon icon-chevron-thin-right"></a></div></div><div class="site-toc show" style="display:block"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%EB%B2%84%ED%8B%B8%EC%88%98%EA%B0%80-%EC%97%86%EB%8B%A4"><span class="toc-number">1.</span> <span class="toc-text">버틸수가 없다</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%EC%BB%A8%ED%8A%B8%EB%A1%A4%EB%9F%AC-%EB%A7%A4%ED%95%91-%EB%AC%B8%EC%A0%9C"><span class="toc-number">1.1.</span> <span class="toc-text">컨트롤러 매핑 문제</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Webpack2-%EC%97%90%EC%84%9C%EC%9D%98-Async-Module-Loading"><span class="toc-number">1.1.1.</span> <span class="toc-text">Webpack2 에서의 Async Module Loading</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ES6-%EB%AA%A8%EB%93%88%EA%B3%BC-commonjs-amd-%EB%AA%A8%EB%93%88%EC%9D%80-%EB%8B%AC%EB%9E%90%EB%8B%A4"><span class="toc-number">1.2.</span> <span class="toc-text">ES6 모듈과 commonjs, amd 모듈은 달랐다.</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EA%B2%B0%EA%B5%AD-%EA%B0%9C%EB%B0%9C%EB%90%9C-%EB%AA%A8%EB%93%A0-%ED%8C%8C%EC%9D%BC%EC%9D%84-ES6-%EC%9C%BC%EB%A1%9C-%EB%B3%80%ED%99%98"><span class="toc-number">1.3.</span> <span class="toc-text">결국, 개발된 모든 파일을 ES6 으로 변환~!</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%EA%B0%9C%EB%B0%9C%EC%84%9C%EB%B2%84%EC%99%80-%EB%B2%88%EB%93%A4%EC%84%9C%EB%B2%84"><span class="toc-number">2.</span> <span class="toc-text">개발서버와 번들서버</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%EC%8B%A4%EC%A0%9C-%EB%B0%B0%ED%8F%AC%ED%99%98%EA%B2%BD"><span class="toc-number">3.</span> <span class="toc-text">실제 배포환경</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%EB%81%9D%EB%82%AC%EB%82%98"><span class="toc-number">4.</span> <span class="toc-text">끝났나</span></a></li></ol></div></div><script type="text/javascript">var GOOGLE_CUSTOM_SEARCH_API_KEY="",GOOGLE_CUSTOM_SEARCH_ENGINE_ID="",ALGOLIA_API_KEY="",ALGOLIA_APP_ID="",ALGOLIA_INDEX_NAME="",AZURE_SERVICE_NAME="",AZURE_INDEX_NAME="",AZURE_QUERY_KEY="",BAIDU_API_ID="",SEARCH_SERVICE="hexo"</script><script src="https://code.jquery.com/jquery-2.1.4.min.js"></script><script>window.jQuery||document.write('<script src="/js/jquery.js"><\/script>')</script><script src="/js/search.js"></script><script src="/js/app.js"></script><script type="text/javascript">var disqus_shortname="https-javarouka-github-io",disqus_url="https://blog.javarouka.me/2017/05/14/convert-legacy-to-webpack-bundle-2/";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><script>document.getElementById("loading-bar").style.width="100%"</script></body></html>