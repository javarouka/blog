<!DOCTYPE html><html><head><meta charset="utf-8"><title>객체 생성 정적 팩토리 메서드를 쓰는게 왜 유리한가 (Effective java 3th - Item1) | NonBlock</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="객체 생성 정적 팩토리 메서드를 쓰는게 왜 유리한가 (Effective java 3th - Item1)"><meta property="og:type" content="article"><meta property="og:title" content="객체 생성 정적 팩토리 메서드를 쓰는게 왜 유리한가 (Effective java 3th - Item1)"><meta property="og:url" content="https://blog.javarouka.me/2018/11/12/static-creator/index.html"><meta property="og:site_name" content="NonBlock"><meta property="og:description" content="객체 생성 정적 팩토리 메서드를 쓰는게 왜 유리한가 (Effective java 3th - Item1)"><meta property="og:locale" content="ko_KR"><meta property="og:image" content="https://blog.javarouka.me/asset/images/effective/effective.webp"><meta property="article:published_time" content="2018-11-11T15:00:00.000Z"><meta property="article:modified_time" content="2020-09-22T04:18:02.871Z"><meta property="article:author" content="JavaRouka"><meta property="article:tag" content="java"><meta property="article:tag" content="effective"><meta property="article:tag" content="serialize"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://blog.javarouka.me/asset/images/effective/effective.webp"><link rel="apple-touch-icon" sizes="57x57" href="/fav/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/fav/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/fav/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/fav/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/fav/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/fav/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/fav/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/fav/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/fav/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/fav/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/fav/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/fav/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/fav/favicon-16x16.png"><link rel="manifest" href="/fav/manifest.json"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/fav/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><meta name="keywords" content="java,effective,serialize"><link href="https://fonts.googleapis.com/css?family=Lato:400,400i,700" rel="stylesheet"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-85661914-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-85661914-1")</script><link rel="stylesheet" href="/icomoon/style.css"><link rel="stylesheet" href="/style.css"><script type="text/javascript">var __sauron=__sauron||[];__sauron.push(["pageview"]),function(){var e="https://analy1.sauroneyes.com/";__sauron.push(["setTrackerUrl",e+"analytics/"]);var a=document,r=a.createElement("script"),s=a.getElementsByTagName("script")[0];r.type="text/javascript",r.async=!0,r.defer=!0,r.src=e+"js/sauron.js",s.parentNode.insertBefore(r,s)}()</script><meta name="generator" content="Hexo 5.2.0"><link rel="stylesheet" href="/css/prism.css" type="text/css"><link rel="alternate" href="/atom.xml" title="NonBlock" type="application/atom+xml">
</head><body><div class="site-wrapper"><div id="loading-bar-wrapper"><div id="loading-bar"></div></div><script>document.getElementById("loading-bar").style.width="20%"</script><header id="header" class="site-header clearfix"><a class="logo square clearfix" href="/"><span class="b">N </span><span class="w">o </span><span class="b">n </span><span class="b">B </span><span class="b">l </span><span class="w">o </span><span class="b">c </span><span class="w">k </span></a><a class="me square site-nav-switch clearfix"><span class="b"><span class="icon icon-menu"></span></span></a></header><aside class="category-wrapper"><div class="site-category"><a class="nav flex-column-link" href="/categories/effective-java/">Effective Java</a><a class="nav flex-column-link" href="/categories/review/">Review</a><a class="nav flex-column-link" href="/categories/tech/">Tech</a><a class="nav flex-column-link" href="/categories/tech/translate/">Translate</a><a class="nav flex-column-link" href="/categories/book/">book</a><a class="nav flex-column-link" href="/categories/java/">java</a><a class="nav flex-column-link" href="/categories/java/kotlin/">kotlin</a><a class="nav flex-column-link" href="/categories/javascript/">javascript</a><a class="nav flex-column-link" href="/categories/javascript/react/">react</a><a class="nav flex-column-link" href="/categories/javascript/react/redux-saga/">redux-saga</a><a class="nav flex-column-link" href="/categories/kotlin/">kotlin</a><a class="nav flex-column-link" href="/categories/kotlin/tech/">tech</a><a class="nav flex-column-link" href="/categories/kotlin/tech/translate/">translate</a></div><div class="search"><form name="searchform" id="searchform" class="u-search-form"><input type="text" id="searchinput" class="u-search-input st-default-search-input" data-list-highlight="true" data-list-value-completion="true" placeholder="Looking for something in this blog?"> <button type="submit" id="u-search-btn-submit" class="u-search-btn-submit"><span class="icon icon-search"></span></button></form></div><script>document.getElementById("loading-bar").style.width="40%"</script><main id="main" class="clearfix"><article id="post-static-creator" class="article white-box article-type-post" itemscope itemprop="blogPost"><header class="article-header"><h1 class="article-title" itemprop="name">객체 생성 정적 팩토리 메서드를 쓰는게 왜 유리한가 (Effective java 3th - Item1)</h1><h2 class="article-sub-title">객체 생성 정적 팩토리 메서드를 쓰는게 왜 유리한가 (Effective java 3th - Item1)</h2><div class="article-meta">Posted on <time class="article-time" datetime="2018-11-11T15:00:00.000Z" itemprop="datePublished">2018-11-12</time></div></header><div class="article-entry" itemprop="articleBody"><h2 id="생성자-기본지식"><a href="#생성자-기본지식" class="headerlink" title="생성자 기본지식"></a>생성자 기본지식</h2><p>java 에서의 보통의 객체 생성은 new 를 사용한다</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; strList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br></pre></td></tr></table></figure><p>공개된(public) 생성자를 new 연산자와 함께 호출해서 객체를 생성한다.</p><p>이 과정에서 알아둘 생성자에 대한 몇가지 기본적인 지식이 있다</p><ul><li>class 정의 시 생성자를 정의하지 않았다면 기본적으로 인자가 없는 생성자가 언어레벨에서 지원된다.</li><li>Subclassing 된 class 라면 자식 생성자 호출 시 부모의 생성자도 연쇄적으로 호출한다. 생성자 체이닝이라고도 부른다.</li><li>어떤 클래스가 기본 생성자가 아닌 생성자가 정의되었다면 Subclass 도 반드시 생성자를 정의해야 한다. 그리고 그 생성자에는 super로 명시적 체이닝을 해줘야 한다</li></ul><p>생성자 호출은 모듈에는 Spring 등의 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://en.wikipedia.org/wiki/Dependency_injection#Dependency_injection_frameworks">DI Framework</a> 를 쓰고, 일반 객체는 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://johngrib.github.io/wiki/builder-pattern/">Builder 패턴</a> 을 사용하게 되면 거의 쓸일이 없어진다.</p><p>하지만 독자 레이어링 시에는 간간히 호출하는 경우가 있기에 알아두면 좋을 것 같다.</p><h2 id="정적-팩토리-메서드"><a href="#정적-팩토리-메서드" class="headerlink" title="정적 팩토리 메서드"></a>정적 팩토리 메서드</h2><p>이 책에서 생성자 대신 정적 팩토리 메서드 생성을 추천하는 이유로 5가지를 들고 있다.</p><h3 id="이름을-가질-수-있다"><a href="#이름을-가질-수-있다" class="headerlink" title="이름을 가질 수 있다"></a>이름을 가질 수 있다</h3><p>객체 생성의 목적은 상황에 따라 다르다. 그리고 그 결과가 어떤 값이 될련지는 생성자 정의에 따라 달라지지만 <code>new XXX</code> 로 호출하는 표현에는 명시적으로 나와있지 않다.</p><p>이름을 가지게 되면 해당 생성의 목적을 이름에 표현할 수 있어 가독성이 증가한다.</p><h3 id="객체-생성-제한이-가능하다"><a href="#객체-생성-제한이-가능하다" class="headerlink" title="객체 생성 제한이 가능하다"></a>객체 생성 제한이 가능하다</h3><p>객체 생성에 제한을 걸거나, 불변 객체를 매번 반환하는 등의 요령을 쓸 수 있다.<br>상황에 따라 신규 생성인지 기존 객체 반환인지도 정할 수 있다.</p><h3 id="SubClass-를-반환할-수-있다"><a href="#SubClass-를-반환할-수-있다" class="headerlink" title="SubClass 를 반환할 수 있다"></a>SubClass 를 반환할 수 있다</h3><p>상속 계층과 타입 상 하위 객체를 반환할 수 있고, 사용자는 그걸 모른채로 사용할 수 있다.</p><p>특정 버전의 class 정적 팩토리 메서드가 하위클래스 A를 반환하다가, 역시 Sub-Classing 된 B 를 반환하더라도 Client 코드에서는 그걸 신경쓰지 않고 작업이 가능하다.</p><p>기본적인 생성자를 사용한다면 구현체 자체가 바뀌었기에 Client 코드의 변경이 불가피해진다.</p><h3 id="입력-매개변수에-따라-다른-타입으로-반환-가능하다"><a href="#입력-매개변수에-따라-다른-타입으로-반환-가능하다" class="headerlink" title="입력 매개변수에 따라 다른 타입으로 반환 가능하다"></a>입력 매개변수에 따라 다른 타입으로 반환 가능하다</h3><p>위 <code>SubClass 를 반환할 수 있다</code> 랑 비슷한 이점이다. 매개변수에 따라 선택적인 Sub-Classing 된 객체를 반환할 수 있다.</p><h3 id="실제-구현체-클래스가-없어도-된다"><a href="#실제-구현체-클래스가-없어도-된다" class="headerlink" title="실제 구현체 클래스가 없어도 된다"></a>실제 구현체 클래스가 없어도 된다</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Car <span class="title">newTruck</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Class&lt;?&gt; truckClz = Class.forName(<span class="string">&quot;me.javarouka.vehicle.Truck&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> truckClz.newInstance();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Car <span class="title">newBus</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Class&lt;?&gt; busClz = Class.forName(<span class="string">&quot;me.javarouka.vehicle.Bus&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> busClz.newInstance();</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>위 코드처럼 처음 클래스가 로더에 존재하지 않아도 동적으로 현재 코드가 실행되는 클래스 로더에 해당 클래스 (예제에서는 com.vehicle.Truck, com.vehicle.Bus) 들을 로딩한다.</p><p>그리고 그 클래스의 인스턴스를 생성해서 반환할 수 있다.</p><blockquote><p>추가적으로 Class.forName 으로 로딩된 클래스들은 static 구문을 수행한다 . 보통 JDBC 3.x 이하를 써본 사람은 많이 본 코드일 것이다</p></blockquote><h2 id="정적-팩토리-메서드의-단점"><a href="#정적-팩토리-메서드의-단점" class="headerlink" title="정적 팩토리 메서드의 단점"></a>정적 팩토리 메서드의 단점</h2><p>책에서는 2가지를 소개하고 있지만 큰 단점으로 보이지 않는다.</p><ul><li>Sub-Classing 어려움</li><li>문서화</li></ul><p>하지만 둘다 큰 단점으로 보이진 않는다.<br>오히려 이시대의 사회악처럼 되어버린 상속을 방지하는 부가효과(?) 가 있고, 문서화는 코드 표현과 네이밍으로 대체할 수 있기 때문이다.</p><p>주로 쓰는 네이밍들은 다음과 같다.</p><ul><li>from<ul><li>매개변수 하나인 메서드</li></ul></li><li>of<ul><li>매개변수가 N개인 메서드</li></ul></li><li>getInstance<ul><li>인스턴스를 생성한다. 앞서 반환한 객체와 같을 수도 있다.</li></ul></li><li>newInstance<ul><li>인스턴스를 생성한다. 앞서 반환한 객체와는 항상 다르다.</li></ul></li><li>getSomeType<ul><li>인스턴스를 생성하지만 자신의 타입이 아닌 다른 타입 (SomeType) 으로 반환한다. 다른 내용은 <code>getInstance</code> 와 같다</li></ul></li><li>newSomeType<ul><li>인스턴스를 생성하지만 자신의 타입이 아닌 다른 타입 (SomeType) 으로 반환한다. 다른 내용은 <code>newInstance</code> 와 같다</li></ul></li></ul></div><div class="article-tags"><a class="tag-none-link" href="/tags/effective/" rel="tag">effective</a><a class="tag-none-link" href="/tags/java/" rel="tag">java</a><a class="tag-none-link" href="/tags/serialize/" rel="tag">serialize</a></div><section id="comments" class="white-box"><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></section></article><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5bf3f68d0a53e4d6"></script><script>document.getElementById("loading-bar").style.width="60%"</script></main><footer id="footer" class="clearfix"><div>&copy; <a href="https://blog.javarouka.me">NonBlock</a> Theme by <a href="http://artifact.me/" target="_blank" rel="external nofollow noopener noreferrer">Art Chen</a>.</div><div>Powered by <a target="_blank" href="https://hexo.io/" rel="external nofollow noopener noreferrer">Hexo</a>.</div></footer><script>document.getElementById("loading-bar").style.width="80%"</script><div class="overlay"></div></aside></div><div class="site-sidebar"><div class="sidebar-switch clearfix show" style="display:block"><a class="dark-btn active" data-toggle="toc"><span class="icon icon-list"></span> <span class="text">Index</span> </a><a class="dark-btn" data-toggle="bio"><span class="icon icon-person"></span> <span class="text">Bio</span></a></div><div class="site-bio" style="display:none"><div class="about-me clearfix"><div class="avatar"><img src="https://avatars2.githubusercontent.com/u/1438503?v=4&s=250"></div><div class="info"><a class="name dark-btn" href="/about">JavaRouka</a></div><div class="info"><span class="item desc">javarouka 의 기술블로그</span></div></div><div class="social clearfix"><a href="/atom.xml" class="feed" target="_blank" rel="external"><span class="icon icon-feed"></span> </a><a href="mailto:javarouka@gmail.com" class="mail" target="_blank" rel="external nofollow noopener noreferrer"><span class="icon icon-mail"></span> </a><a href="https://github.com/javarouka" class="github" target="_blank" rel="external nofollow noopener noreferrer"><span class="icon icon-github"></span> </a><a href="https://www.facebook.com/hanghui.i" class="facebook" target="_blank" rel="external nofollow noopener noreferrer"><span class="icon icon-facebook"></span></a></div><div class="shortcuts clearfix"><div class="bk"><a href="#header" class="dark-btn window-nav"><span class="icon icon-chevron-thin-up"></span> <span class="text">Back to Top</span></a></div><div class="bk"><a href="#footer" class="dark-btn window-nav"><span class="icon icon-chevron-thin-down"></span> <span class="text">Go to Bottom</span></a></div></div></div><div class="site-post-nav show" style="display:block"><div class="site-post-nav-box"><a href="/2018/11/14/builder/" class="icon icon-chevron-thin-left"><a href="/2018/11/14/builder/" class="site-post-nav-text">빌더 패턴 (Effective java 3th - Item2)</a></a></div><div class="site-post-nav-box"><a href="/2018/11/10/effective-java/" class="site-post-nav-text">Effective Java 3th 정리노트</a> <a href="/2018/11/10/effective-java/" class="icon icon-chevron-thin-right"></a></div></div><div class="site-toc show" style="display:block"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%EC%83%9D%EC%84%B1%EC%9E%90-%EA%B8%B0%EB%B3%B8%EC%A7%80%EC%8B%9D"><span class="toc-number">1.</span> <span class="toc-text">생성자 기본지식</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%EC%A0%95%EC%A0%81-%ED%8C%A9%ED%86%A0%EB%A6%AC-%EB%A9%94%EC%84%9C%EB%93%9C"><span class="toc-number">2.</span> <span class="toc-text">정적 팩토리 메서드</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%EC%9D%B4%EB%A6%84%EC%9D%84-%EA%B0%80%EC%A7%88-%EC%88%98-%EC%9E%88%EB%8B%A4"><span class="toc-number">2.1.</span> <span class="toc-text">이름을 가질 수 있다</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EA%B0%9D%EC%B2%B4-%EC%83%9D%EC%84%B1-%EC%A0%9C%ED%95%9C%EC%9D%B4-%EA%B0%80%EB%8A%A5%ED%95%98%EB%8B%A4"><span class="toc-number">2.2.</span> <span class="toc-text">객체 생성 제한이 가능하다</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SubClass-%EB%A5%BC-%EB%B0%98%ED%99%98%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8B%A4"><span class="toc-number">2.3.</span> <span class="toc-text">SubClass 를 반환할 수 있다</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EC%9E%85%EB%A0%A5-%EB%A7%A4%EA%B0%9C%EB%B3%80%EC%88%98%EC%97%90-%EB%94%B0%EB%9D%BC-%EB%8B%A4%EB%A5%B8-%ED%83%80%EC%9E%85%EC%9C%BC%EB%A1%9C-%EB%B0%98%ED%99%98-%EA%B0%80%EB%8A%A5%ED%95%98%EB%8B%A4"><span class="toc-number">2.4.</span> <span class="toc-text">입력 매개변수에 따라 다른 타입으로 반환 가능하다</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EC%8B%A4%EC%A0%9C-%EA%B5%AC%ED%98%84%EC%B2%B4-%ED%81%B4%EB%9E%98%EC%8A%A4%EA%B0%80-%EC%97%86%EC%96%B4%EB%8F%84-%EB%90%9C%EB%8B%A4"><span class="toc-number">2.5.</span> <span class="toc-text">실제 구현체 클래스가 없어도 된다</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%EC%A0%95%EC%A0%81-%ED%8C%A9%ED%86%A0%EB%A6%AC-%EB%A9%94%EC%84%9C%EB%93%9C%EC%9D%98-%EB%8B%A8%EC%A0%90"><span class="toc-number">3.</span> <span class="toc-text">정적 팩토리 메서드의 단점</span></a></li></ol></div></div><script type="text/javascript">var GOOGLE_CUSTOM_SEARCH_API_KEY="",GOOGLE_CUSTOM_SEARCH_ENGINE_ID="",ALGOLIA_API_KEY="",ALGOLIA_APP_ID="",ALGOLIA_INDEX_NAME="",AZURE_SERVICE_NAME="",AZURE_INDEX_NAME="",AZURE_QUERY_KEY="",BAIDU_API_ID="",SEARCH_SERVICE="hexo"</script><script src="https://code.jquery.com/jquery-2.1.4.min.js"></script><script>window.jQuery||document.write('<script src="/js/jquery.js"><\/script>')</script><script src="/js/search.js"></script><script src="/js/app.js"></script><script type="text/javascript">var disqus_shortname="https-javarouka-github-io",disqus_url="https://blog.javarouka.me/2018/11/12/static-creator/";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><script>document.getElementById("loading-bar").style.width="100%"</script></body></html>