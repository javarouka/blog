<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <title>ES7 Decorator</title>
</head>
<body>

    <header>
        <h1>ES7 Decorator 탐구생활</h1>
        <p class="header-summary">ES7의 Decorator 에 대해 이모저모 알아보자.</p>
    </header>

    <section>

        <h2>Decorator?</h2>
        <div>
            <em>함수(function)</em> <em>표현식(expression)</em> 에 해당한다.
            <em>@</em>와 같이 써서 표현식 뒤에 오는 대상 (보통 target 이라고 함...같은 말이군.)에 더욱 기능적으로 추가하거나(decarating) 하는 일들을 할 수 있다.
            <br/>
            <br/>
            보통 다음의 경우에 많이 적용 (되는 것 같이 보이긴) 한다
            <ul>
                <li>함수에 Interceptor 성의 기능 추가. 로깅 등이나 인자 유효성 검사 등</li>
                <li>예외 처리나 로깅 등의 종단관심사 처리. AOP 라 부르는 것들</li>
                <li>
                    <span>믹스인 생성 및 적용</span>
                    <a href="//medium.com/google-developers/exploring-es7-decorators-76ecb65fb841#22de">예제 #1</a>
                </li>
                <li>property descriptor 를 조작하여 get/set 조작 및 열거 등의 조작</li>
                <li>인자에 따른 Proxy 처리</li>
                <li>기타등등...생각하기에 따라</li>
            </ul>

            <blockquote>ES2015 스펙에는 일단 없지만, 아마 다음 스펙엔 추가될 것 같다.</blockquote>
        </div>
        <h2>Basic</h2>
        <div>
            Decorator 는 함수이기에 함수로 작성해야 한다. Arrow Function 도 좋고 function keyword 를 써도 좋다.
            <br/>
            일단 다음과 같은 함수를 정의해보자
            <pre><code class="language-javascript">function something() {
    console.log("뭔가 해보자!");
}</code></pre>
            <br/>
            위의 함수에 권한 기능을 추가한다고 해보자. 권한이 있는 사용자만 수행을 할 수 있게 하는 거다.
            <pre><code class="language-javascript">// 권한 에러 정의
class NotAllowedError extends Error {}

function something() {
    if(!isAllowed()) throw new NotAllowedError('수행 권한이 없습니다');
    console.log("뭔가 해보자!");
}</code></pre>
            <br/>
            간단하다.
            <br/>
            <br/>
            하지만 보통 권한은 다수의 작업에 적용되기에 저 만일 <em>something</em> 함수 외에도 여러 다른 함수에 적용하려고 하면 그 수만큼 코드를 추가해야 할 것이다.
            <pre><code class="language-javascript">// 이 코드가 권한을 부여할 함수 바디안에 중복된다!
if(!isAllowed()) throw new NotAllowedError('수행 권한이 없습니다');</code></pre>
            <br/>
            보통 이런 경우 소싯적 JavaScript 를 좀 다뤄봤다 하는 프로그래머들은 다음과 같이 처리할 수 있겠다
            <br/>
            먼저 다음과 같은 래핑 함수를 만든다
            <pre><code class="language-javascript">const allowExecution = (fn, ctx) => {
    if(!isAllowed()) throw new NotAllowedError('수행 권한이 없습니다');
    return fn.apply(ctx, arguments);
}</code></pre>
            <br/>
            이제 래핑이다.
            <br/>
            <pre><code class="language-javascript">// 기존의 함수에...
function something() {
    console.log("뭔가 해보자!");
}

// 권한 래핑!
const wrapSomething = allowExecution(something);</code></pre>
            <br/>
            이제 어떤 함수든 권한을 부여할 수 있다.


    </div>

    <h2>Function/Class</h2>
    <p></p>

    <h2>Method</h2>
    <p></p>

    <h2>Examples</h2>
    <p></p>

</section>

<footer>
    <h2></h2>
</footer>

</body>
</html>